Notebook[{

Cell[CellGroupData[{
Cell["Plugins", \
"CodeSection",ExpressionUUID->"f41f2779-bedb-441f-9bc7-505e59a75f9d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"LoadPlugin", "::", "usage"}], "=", "\"\<\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"GetPluginData", "::", "usage"}], "=", "\"\<\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"GetPluginsMenus", "::", "usage"}], "=", "\"\<\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"f7901439-2cbd-42dc-af1b-391616eecfa5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"e8321858-eec3-44f6-b88c-\
2f5426dab82b"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Plugins\[RightFloor]", "CodeSubsection",
 Evaluatable->True,ExpressionUUID->"e1633d0d-e734-40c4-bae1-fcf7c914aa39"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]LoadPlugin\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"0cd434d3-7344-4f75-8b2f-beddbd183c6b"],

Cell[BoxData[
 RowBox[{"Quiet", "[", "\n", "\t", 
  RowBox[{"System`MenuKey", ";", "\n", "\t", "System`MenuItem", ";"}], "\n", 
  "\t", "]"}]], \
"CodeInput",ExpressionUUID->"edd374a9-5b1a-41f6-b6bc-7a277273e3bf"],

Cell["\<\
\[LeftCeiling]
\tMenuCommands get loaded into the main menu bar, 
\tActionMenus get stuck into the DockedCell, 
\tand some day MenuItem expressions will get dumped into the main menu(?).
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"52c63527-3438-48bb-9f51-f47b990a716b"],

Cell[BoxData[{
 RowBox[{"LoadPlugin", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"LoadPlugin", "[", 
    RowBox[{
     RowBox[{"file_String", "?", "FileExistsQ"}], ",", " ", 
     RowBox[{"default_:", "Automatic"}]}], "]"}], ":=", "\n", "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", "pluginData", "\n", "\t\t\t", "}"}], ",", 
     "\n", "\t\t", 
     RowBox[{
      RowBox[{"PackageExecute", "[", "\n", "\t\t\t", 
       RowBox[{"Internal`WithLocalSettings", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"BeginPackage", "[", "\"\<`Plugins`\>\"", "]"}], ";", "\n", 
          "\t\t\t\t", 
          RowBox[{"$ContextPath", " ", "=", " ", "\n", "\t\t\t\t\t", 
           RowBox[{"Join", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"{", "\"\<System`\>\"", "}"}], ",", "\n", "\t\t\t\t\t\t",
              "$PackageContexts", ",", " ", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Append", "[", 
              RowBox[{"$ContextPath", ",", " ", "$Context"}], "]"}]}], "\n", 
            "\t\t\t\t\t\t", "]"}]}], ";"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"pluginData", " ", "=", " ", 
          RowBox[{"Get", "[", "file", "]"}]}], ",", "\n", "\t\t\t\t", 
         RowBox[{"EndPackage", "[", "]"}]}], "\n", "\t\t\t\t", "]"}], "\n", 
       "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"pluginData", "=", "\n", "\t\t\t", 
       RowBox[{"Replace", "[", 
        RowBox[{"pluginData", ",", " ", "\n", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"a_Association", "?", 
             RowBox[{"(", 
              RowBox[{
               RowBox[{
                RowBox[{"KeyExistsQ", "[", 
                 RowBox[{"#", ",", " ", "\"\<Name\>\""}], "]"}], "&&", 
                RowBox[{"(", "\n", "\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"KeyExistsQ", "[", 
                   RowBox[{"#", ",", " ", "\"\<Commands\>\""}], "]"}], "||", 
                  "\n", "\t\t\t\t\t\t", 
                  RowBox[{"KeyExistsQ", "[", 
                   RowBox[{"#", ",", " ", "\"\<Menu\>\""}], "]"}], "||", "\n",
                   "\t\t\t\t\t\t", 
                  RowBox[{"KeyExistsQ", "[", 
                   RowBox[{"#", ",", " ", "\"\<Toolbar\>\""}], "]"}]}], "\n", 
                 "\t\t\t\t\t\t", ")"}]}], "&"}], ")"}]}], ":>", "\n", 
            "\t\t\t\t\t\t", "a"}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"pd_", "?", 
             RowBox[{"(", 
              RowBox[{
               RowBox[{"StringQ", "[", "default", "]"}], "&"}], ")"}]}], ":>",
             "\n", "\t\t\t\t\t\t", 
            RowBox[{"<|", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"\"\<Name\>\"", "\[Rule]", 
               RowBox[{"FileBaseName", "[", "file", "]"}]}], ",", "\n", 
              "\t\t\t\t\t\t\t", 
              RowBox[{"default", "\[Rule]", "pd"}]}], "\n", "\t\t\t\t\t\t\t", 
             "|>"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"pd", ":", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"(", 
                 RowBox[{"_Rule", "|", "_RuleDelayed"}], ")"}], ".."}], "}"}],
               "|", "_Association"}]}], ":>", "\n", "\t\t\t\t\t\t", 
            RowBox[{"<|", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"\"\<Name\>\"", "\[Rule]", 
               RowBox[{"FileBaseName", "[", "file", "]"}]}], ",", "\n", "\t", 
              "\t\t\t\t\t\t", 
              RowBox[{"\"\<Commands\>\"", "\[Rule]", "pd"}]}], "\n", 
             "\t\t\t\t\t\t\t", "|>"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"pd", ":", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{"Delimiter", "|", "_RuleDelayed"}], ")"}], ".."}], 
              "}"}]}], ":>", "\n", "\t\t\t\t\t\t", 
            RowBox[{"<|", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"\"\<Name\>\"", "\[Rule]", 
               RowBox[{"FileBaseName", "[", "file", "]"}]}], ",", "\n", "\t", 
              "\t\t\t\t\t\t", 
              RowBox[{"\"\<Menu\>\"", "\[Rule]", "pluginData"}]}], "\n", 
             "\t\t\t\t\t\t\t", "|>"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"_List", ":>", "\n", "\t\t\t\t\t\t", 
            RowBox[{"<|", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"\"\<Name\>\"", "\[Rule]", 
               RowBox[{"FileBaseName", "[", "file", "]"}]}], ",", "\n", 
              "\t\t\t\t\t\t\t", 
              RowBox[{"\"\<Toolbar\>\"", "\[Rule]", "pluginData"}]}], "\n", 
             "\t\t\t\t\t\t\t", "|>"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"m_", ":>", "\n", "\t\t\t\t\t\t", 
            RowBox[{"<|", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"\"\<Name\>\"", "\[Rule]", 
               RowBox[{"FileBaseName", "[", "file", "]"}]}], ",", "\n", 
              "\t\t\t\t\t\t\t", 
              RowBox[{"\"\<Menu\>\"", "\[Rule]", "m"}]}], "\n", 
             "\t\t\t\t\t\t\t", "|>"}]}]}], "\n", "\t\t\t\t\t", "}"}]}], "\n", 
        "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"!", 
         RowBox[{"KeyExistsQ", "[", 
          RowBox[{"pluginData", ",", " ", "\"\<Type\>\""}], "]"}]}], ",", 
        "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"pluginData", "[", "\"\<Type\>\"", "]"}], "=", "\n", 
         "\t\t\t\t", 
         RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"KeyExistsQ", "[", 
            RowBox[{"pluginData", ",", " ", "\"\<Commands\>\""}], "]"}], ",", 
           "\n", "\t\t\t\t\t\t", "\"\<Commands\>\"", ",", "\n", "\t\t\t\t\t", 
           
           RowBox[{"KeyExistsQ", "[", 
            RowBox[{"pluginData", ",", " ", "\"\<Toolbar\>\""}], "]"}], ",", 
           "\n", "\t\t\t\t\t\t", "\"\<Toolbar\>\"", ",", "\n", "\t\t\t\t\t", 
           "True", ",", "\n", "\t\t\t\t\t\t", "\"\<Menu\>\""}], "\n", 
          "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"pluginData", "[", "\"\<Type\>\"", "]"}], "===", 
         "\"\<Commands\>\""}], ",", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"pluginData", "[", "\"\<Commands\>\"", "]"}], "=", "\n", 
         "\t\t\t\t", 
         RowBox[{
          RowBox[{"pluginData", "[", "\"\<Name\>\"", "]"}], "\[Rule]", 
          RowBox[{"pluginData", "[", "\"\<Commands\>\"", "]"}]}]}]}], "\n", 
       "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"normalizePlugin", "@", "pluginData"}]}]}], "\n", "\t\t", 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"LoadPlugin", "[", 
   RowBox[{"name_String", ",", " ", 
    RowBox[{"default_:", "Automatic"}]}], "]"}], ":=", "\n", "  ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "pgfs", "}"}], ",", "\n", "    ", 
    RowBox[{
     RowBox[{"pgfs", "=", "\n", "      ", 
      RowBox[{"FileNames", "[", 
       RowBox[{
        RowBox[{"name", "~~", 
         RowBox[{"(", 
          RowBox[{"\"\<.wl\>\"", "|", "\"\<.m\>\""}], ")"}]}], ",", " ", "\n",
         "\t\t\t\t\t", 
        RowBox[{"FileNames", "[", "\n", "\t\t\t\t\t  ", 
         RowBox[{
          RowBox[{"Switch", "[", 
           RowBox[{
           "default", ",", "\n", "\t\t\t\t\t    ", "Automatic", ",", "\n", 
            "  \t\t\t\t\t    ", 
            RowBox[{"\"\<Plugins\>\"", "|", "\"\<Toolbars\>\""}], ",", "\n", 
            "\t\t\t\t\t    ", "\"\<Menu\>\"", ",", "\n", "\t\t\t\t\t      ", 
            "\"\<Plugins\>\"", ",", "\n", "\t\t\t\t\t    ", "\"\<Toolbar\>\"",
             ",", "\n", "\t\t\t\t\t      ", "\"\<Toolbars\>\""}], "\n", 
           "\t\t\t\t\t    ", "]"}], ",", "\n", "\t\t\t\t\t  ", 
          "$IDESettingsPath"}], "\n", "\t\t\t\t\t  ", "]"}]}], "\n", 
       "\t\t\t\t\t", "]"}]}], ";", "\n", "\t\t ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "@", "pgfs"}], ">", "0"}], ",", "\n", "\t\t   ", 
       RowBox[{"LoadPlugin", "[", 
        RowBox[{
         RowBox[{"First", "@", "pgfs"}], ",", " ", "default"}], "]"}], ",", 
       "\n", "\t\t   ", "None"}], "\n", "\t\t   ", "]"}]}]}], "\n", "\t\t ", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"0a91ee53-bdd1-481c-bfbc-54f757ac8f1c"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]getPluginActionMenu\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"fb8a001c-346c-42c7-87c2-ac8c4430c139"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"getPluginActionMenu", "[", "plugin_", "]"}], ":=", "\n", "\t", 
   RowBox[{"ActionMenu", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"MouseAppearance", "[", "\n", "\t  \t", 
      RowBox[{
       RowBox[{"Button", "[", "\n", "  \t\t\t", 
        RowBox[{
         RowBox[{"plugin", "[", "\"\<Name\>\"", "]"}], ",", "\n", "  ", 
         "\t\t\t", "\"\<\>\"", ",", "\n", "  ", "\t\t\t", 
         RowBox[{"BaseStyle", "\[Rule]", "\"\<PluginMenu\>\""}], ",", "\n", 
         "  ", "\t\t\t", 
         RowBox[{"Appearance", "\[Rule]", "Inherited"}]}], "\n", "  ", 
        "\t\t\t", "]"}], ",", "\n", "\t\t\t", "\"\<LinkHand\>\""}], "\n", 
      "\t\t\t", "]"}], ",", "\n", "\t\t", 
     RowBox[{"Replace", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"plugin", "[", "\"\<Menu\>\"", "]"}], ",", "\n", "\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"l_", "\[RuleDelayed]", "c_"}], ")"}], "\[RuleDelayed]", 
         "\n", "\t\t\t\t\t", 
         RowBox[{"(", 
          RowBox[{"l", "\[RuleDelayed]", 
           RowBox[{"(", 
            RowBox[{"PreemptiveQueued", "[", 
             RowBox[{"$CurrentIDENotebook", ",", " ", "c"}], "]"}], ")"}]}], 
          ")"}]}], "\n", "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", "1"}], "\n", 
      "\t\t\t", "]"}], ",", "\n", "\t\t", 
     RowBox[{"BaseStyle", "\[Rule]", "\"\<PluginMenu\>\""}], ",", "\n", 
     "\t\t", 
     RowBox[{"MenuAppearance", "\[Rule]", "\"\<PluginMenuList\>\""}], ",", 
     "\n", "\t\t", 
     RowBox[{"Sequence", "@@", 
      RowBox[{"Flatten", "@", 
       RowBox[{"{", 
        RowBox[{"Lookup", "[", 
         RowBox[{"plugin", ",", " ", "\"\<Options\>\"", ",", " ", 
          RowBox[{"{", "}"}]}], "]"}], "}"}]}]}]}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"b12cd724-4d7f-4965-a128-9188eb171440"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]getPluginToolbar\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"15f0b14c-badb-4b4b-8052-afbf2dd92303"],

Cell[BoxData[
 RowBox[{
  RowBox[{"getPluginToolbar", "[", "plugin_", "]"}], ":=", "\n", "\t", 
  RowBox[{"Replace", "[", "\n", "\t\t ", 
   RowBox[{
    RowBox[{"plugin", "[", "\"\<Toolbar\>\"", "]"}], ",", "\n", "\t\t ", 
    RowBox[{"{", "\n", "\t\t\t ", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{"key_", "\[RuleDelayed]", 
         RowBox[{"{", 
          RowBox[{"command_", ",", " ", "ops___"}], "}"}]}], ")"}], ":>", 
       "\n", "\t\t\t\t\t\t", 
       RowBox[{"MouseAppearance", "[", "\n", "\t\t\t\t\t\t  ", 
        RowBox[{
         RowBox[{"Button", "[", "\n", "  \t          ", 
          RowBox[{
          "key", ",", " ", "\n", "  \t\t\t\t\t\t\t", "command", ",", "\n", 
           "  \t\t\t\t\t\t\t", 
           RowBox[{"Sequence", "@@", 
            RowBox[{"FilterRules", "[", "\n", "  ", "\t\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Appearance", "\[Rule]", "Inherited"}], ",", " ", 
                "ops"}], "}"}], ",", " ", "\n", "  ", "\t", "\t", 
              "\t\t\t\t\t\t", 
              RowBox[{"Join", "[", 
               RowBox[{
                RowBox[{"Options", "[", "Button", "]"}], ",", " ", 
                RowBox[{"Options", "[", "ButtonBox", "]"}]}], "]"}]}], "\n", 
             "  \t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "  \t\t\t\t\t\t\t", "]"}],
          ",", "\n", "            ", "\"\<LinkHand\>\""}], "\n", 
        "            ", "]"}]}], ",", "\n", "\t\t\t\t\t", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"key_", "\[RuleDelayed]", "command_"}], ")"}], ":>", "\n", 
       "\t\t\t\t\t\t ", 
       RowBox[{"MouseAppearance", "[", 
        RowBox[{
         RowBox[{"Button", "[", 
          RowBox[{"key", ",", " ", "command", ",", " ", 
           RowBox[{"Appearance", "\[Rule]", "Inherited"}]}], "]"}], ",", " ", 
         "\"\<LinkHand\>\""}], "]"}]}]}], "\n", "\t\t\t\t \t", "}"}], ",", 
    "\n", "\t\t\t\t", "1"}], "\n", "\t\t\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"d9457188-61ed-4075-b2c1-a450dbb0c505"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]normalizePlugin\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"a82daeeb-b28c-4d1c-b9d7-eaff2f8bdfff"],

Cell[BoxData[
 RowBox[{
  RowBox[{"normalizePlugin", "[", "a_Association", "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"plugin", "=", "a"}], "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Which", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"plugin", "[", "\"\<Type\>\"", "]"}], "\[Equal]", 
        "\"\<Menu\>\""}], ",", "\n", "\t", "\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"ListQ", "@", 
          RowBox[{"plugin", "[", "\"\<Menu\>\"", "]"}]}], ",", "\n", "\t", 
         "\t\t\t\t", 
         RowBox[{
          RowBox[{"plugin", "[", "\"\<Menu\>\"", "]"}], "=", "\n", 
          "\t\t\t\t\t\t", 
          RowBox[{"getPluginActionMenu", "[", "plugin", "]"}]}]}], "\n", 
        "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"plugin", "[", "\"\<Type\>\"", "]"}], "\[Equal]", 
        "\"\<Toolbar\>\""}], ",", "\n", "\t\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"ListQ", "@", 
          RowBox[{"plugin", "[", "\"\<Toolbar\>\"", "]"}]}], ",", "\n", 
         "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"plugin", "[", "\"\<Toolbar\>\"", "]"}], "=", "\n", 
          "\t\t\t\t\t\t", 
          RowBox[{"getPluginToolbar", "[", "plugin", "]"}]}]}], "\n", 
        "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     "plugin"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"ca0e156e-e546-4384-8f44-62bf646e7302"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GetPluginData\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"138d6bf0-2ef2-49ad-8860-b207668686a9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"GetPluginData", "[", "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "baseData", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"baseData", "=", "\n", "\t\t\t", 
      RowBox[{"Map", "[", "\n", "\t\t\t\t", 
       RowBox[{"LoadPlugin", ",", "\n", "\t\t\t\t", 
        RowBox[{"FileNames", "[", 
         RowBox[{
          RowBox[{"__", "~~", 
           RowBox[{"(", 
            RowBox[{"\"\<.wl\>\"", "|", "\"\<.m\>\""}], ")"}]}], ",", " ", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<Plugins\>\"", ",", " ", "$IDESettingsPath"}], "]"}]}],
          "\n", "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"baseData", " ", "=", "\n", "\t\t\t", 
      RowBox[{"GroupBy", "[", 
       RowBox[{"baseData", ",", " ", 
        RowBox[{"#Type", "&"}]}], "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"KeyExistsQ", "[", 
         RowBox[{"baseData", ",", " ", "\"\<Menu\>\""}], "]"}]}], ",", " ", 
       RowBox[{
        RowBox[{"baseData", "[", "\"\<Menu\>\"", "]"}], "=", 
        RowBox[{"{", "}"}]}]}], "]"}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"KeyExistsQ", "[", 
         RowBox[{"baseData", ",", " ", "\"\<Commands\>\""}], "]"}]}], ",", 
       " ", 
       RowBox[{
        RowBox[{"baseData", "[", "\"\<Commands\>\"", "]"}], "=", 
        RowBox[{"{", "}"}]}]}], "]"}], ";", "\n", "\t\t", "baseData"}]}], 
   "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"3f61d907-208e-44d8-ba5e-5ef8148f7046"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]createPluginCommandsMenu\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"36f6e506-65cd-4229-ada5-03938825b539"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"createPluginCommandsMenu", "[", 
    RowBox[{"s_", ",", " ", "data_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"(", "\n", "\t\t", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"AssociationQ", "[", "s", "]"}]}], ",", " ", 
       RowBox[{"s", "=", 
        RowBox[{"<|", "|>"}]}]}], "]"}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"KeyExistsQ", "[", 
        RowBox[{"s", ",", " ", "\"\<RootCell\>\""}], "]"}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"DestroyDropDownMenu", "[", 
        RowBox[{"Dynamic", "[", "s", "]"}], "]"}], ",", "\n", "\t\t\t", 
       RowBox[{"AttachDropDownMenu", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"Dynamic", "[", "s", "]"}], ",", " ", "\n", "\t\t\t\t", 
         RowBox[{"EvaluationBox", "[", "]"}], ",", " ", "\n", "\t\t\t\t", 
         RowBox[{"Lookup", "[", 
          RowBox[{
           RowBox[{"data", "[", "\"\<Commands\>\"", "]"}], ",", " ", 
           "\"\<Commands\>\"", ",", " ", 
           RowBox[{"{", "}"}]}], "]"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", 
      "\t\t\t", "]"}]}], "\n", "\t\t", ")"}]}], ";"}], "\n", 
 RowBox[{"createPluginCommandsMenu", "~", "SetAttributes", "~", 
  "HoldFirst"}]}], \
"CodeInput",ExpressionUUID->"db763f16-5b58-4ba6-9ea5-2584e6c40bfe"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GetPluginsMenus\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"a7caf7ee-6440-4119-9b75-6a932f3ce7b4"],

Cell[BoxData[{
 RowBox[{"GetPluginsMenus", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{"GetPluginsMenus", "[", "nb_", "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"data", "=", 
      RowBox[{"GetPluginData", "[", "]"}]}], "}"}], ",", "\n", "\t\t", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"pluginMenuState", ",", " ", "state"}], "}"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{
       RowBox[{"state", "=", 
        RowBox[{"IDEData", "[", 
         RowBox[{"nb", ",", " ", 
          RowBox[{"PrivateKey", "[", "\"\<MenuState\>\"", "]"}], ",", " ", 
          RowBox[{"Hold", "[", "pluginMenuState", "]"}]}], "]"}]}], ";", "\n",
        "\t\t\t", 
       RowBox[{"<|", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"\"\<DropDown\>\"", "->", "\n", "\t\t\t\t\t", 
          RowBox[{"Replace", "[", 
           RowBox[{"state", ",", "\n", "\t", "\t", "\t\t\t\t", 
            RowBox[{
             RowBox[{"Hold", "[", "s_", "]"}], ":>", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"MouseAppearance", "[", "\n", "\t\t\t\t\t\t\t  ", 
              RowBox[{
               RowBox[{"Button", "[", "\n", "  \t\t\t\t\t\t\t\t", 
                RowBox[{
                "\"\<Plugins\>\"", ",", "\n", "  ", "\t", "\t\t\t\t\t\t\t", 
                 RowBox[{"createPluginCommandsMenu", "[", 
                  RowBox[{"s", ",", " ", "data"}], "]"}], ",", "\n", "  ", 
                 "\t", "\t\t\t\t\t\t\t", 
                 RowBox[{"BaseStyle", "\[Rule]", "\"\<PluginMenu\>\""}], ",", 
                 "\n", "  ", "\t", "\t", "\t", "\t\t\t\t\t", 
                 RowBox[{"Appearance", "\[Rule]", "Inherited"}], ",", "\n", 
                 "  ", "\t", "\t", "\t", "\t\t\t\t\t", 
                 RowBox[{"ImageSize", "\[Rule]", 
                  RowBox[{"{", 
                   RowBox[{"Automatic", ",", " ", "Automatic"}], "}"}]}]}], 
                "\n", "  \t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
               "  \t\t\t\t\t\t ", "\"\<LinkHand\>\""}], "\n", 
              "  \t\t\t\t\t\t ", "]"}]}]}], "\n", "\t\t\t\t\t\t", "]"}]}], 
         ",", "\n", "\t\t\t\t", 
         RowBox[{"\"\<Menus\>\"", "->", 
          RowBox[{"Lookup", "[", 
           RowBox[{
            RowBox[{"data", "[", "\"\<Menu\>\"", "]"}], ",", " ", 
            "\"\<Menu\>\""}], "]"}]}]}], "\n", "\t\t\t\t", "|>"}]}]}], "\n", 
     "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"7050092d-581b-4baa-8122-efffdcbfe5cf"]
}, Closed]]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"End", "[", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"e0764fdb-4d4e-42a0-a2cd-\
657dd4da75c5"]
}, Open  ]],

Cell["", "SectionSeparator",ExpressionUUID->"82266030-8de8-4f60-9fe5-\
c4f2c4ecbe99"]
},
NotebookEventActions->{{"MenuCommand", "Save"} :> 
  EasyIDE`Notebooks`Manipulation`IDESave[
    EvaluationNotebook[]], 
  "MouseDown" :> (Needs["EasyIDE`"]; 
   EasyIDE`Notebooks`Manipulation`EnsureNotebookUpdated[
     EvaluationNotebook[]]), PassEventsDown -> True, EvaluationOrder -> After},
Selectable->True,
WindowSize->{884, 781},
WindowMargins->{{Automatic, 220}, {Automatic, 14}},
WindowTitle->"EasyIDE: EasyIDE",
TaggingRules->{
 "IndentCharacter" -> "  ", 
  "EasyIDE" -> {
   "Tabs" -> {
     "StyleManagement" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/EasyIDE/Packages/Notebooks/Manipulation/\
StyleManagement.nb", "Modified" -> False}, 
      "Apps" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/EasyIDE/Resources/Settings/Plugins/Apps.wl", 
        "Modified" -> False}, 
      "NotebookManipulation" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/EasyIDE/Packages/Notebooks/Manipulation/\
NotebookManipulation.nb", "Modified" -> False}, 
      "HelperFunctions" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/EasyIDE/Packages/Notebooks/Utilities/HelperFunctions.\
nb", "Modified" -> False}, 
      "FileViewer" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/EasyIDE/Packages/Notebooks/FormattingElements/\
FileViewer.nb", "Modified" -> False}, 
      "CodePackage" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/EasyIDE/Resources/Settings/Toolbars/CodePackage.wl", 
        "Modified" -> False}, 
      "Plugins" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/EasyIDE/Packages/Notebooks/FormattingElements/\
Plugins.nb", "Modified" -> False}, 
      "Tabs" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/EasyIDE/Packages/Notebooks/FormattingElements/Tabs.\
nb", "Modified" -> False}}, "FileViewer" -> {"Visible" -> False}, 
    "Toolbars" -> {"Column" -> GridBox[{{
          GridBox[{{
             PaneBox["", ImageSize -> {0, 15}], 
             ButtonBox[
             "", BaseStyle -> "ToolbarShowButton", ButtonData -> 
              "CodePackage"]}}, BaseStyle -> "ToolbarCell"]}}, BaseStyle -> 
        "Toolbars"], "Tags" -> {}, 
      "Cells" -> {
       "CodePackage" -> None, "Docs" -> None, "BugTracker" -> None, 
        "Authoring" -> None, "Package" -> None}}, 
    "Project" -> {
     "Directory" -> 
      "/Users/Mark/Documents/Wolfram Mathematica/Applications/EasyIDE/"}, 
    "ActiveTab" -> "Plugins", "StyleSheet" -> 
    FrontEnd`FileName[{"EasyIDE", "Extensions", "DarkGUI"}, "CodePackage.nb"],
     "FileToolbar" -> "CodePackage", 
    "Options" -> {
     WindowSize -> {808, 755}, 
      WindowMargins -> {{166, Automatic}, {Automatic, 0}}, 
      TaggingRules -> {
       "UUIDButtons" -> {
         "Active" -> {
           "Button-89ffd2c3-ec41-4179-a9b1-8e28670bca2c" -> False, 
            "Button-ca46e5e0-4fd1-47e8-8cf6-72998922b757" -> False, 
            "Button-a6d68254-3684-4d32-83fc-e5ef6f443930" -> False}}}, 
      FrontEndVersion -> 
      "11.3 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 5, 2018)", 
      StyleDefinitions -> 
      FrontEnd`FileName[{"BTools"}, "CodePackage.nb", CharacterEncoding -> 
        "UTF-8"]}, "AutoGeneratePackage" -> True, "SavingAction" -> None, 
    "MainStyleName" -> "DarkGUI", "BaseStyleName" -> "LightMode", 
    "Styles" -> {
     "UnthemedStylesheet" -> "CodePackage", "StyleSheet" -> 
      FrontEnd`FileName[{"EasyIDE", "Extensions", "DarkGUI"}, 
        "CodePackage.nb"], "Theme" -> "DarkGUI"}}, 
  "Bugs" -> {"SearchInterface" -> {"SearchText" -> ""}}, 
  "UUIDButtons" -> {
   "Active" -> {
     "Button-89ffd2c3-ec41-4179-a9b1-8e28670bca2c" -> False, 
      "Button-ca46e5e0-4fd1-47e8-8cf6-72998922b757" -> False, 
      "Button-a6d68254-3684-4d32-83fc-e5ef6f443930" -> False, 
      "Button-218b63f2-ff44-42ce-90ef-7f03f91452c9" -> False}}},
DynamicUpdating->Automatic,
FrontEndVersion->"12.0 for Mac OS X x86 (64-bit) (April 8, 2019)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> 
     FrontEnd`FileName[{"EasyIDE", "Extensions", "DarkGUI"}, 
       "CodePackage.nb"]]]}, Visible -> False, 
  TaggingRules -> {"EasyIDE" -> {"FileViewer" -> {"Visible" -> False}}}, 
  FrontEndVersion -> "12.0 for Mac OS X x86 (64-bit) (April 8, 2019)", 
  StyleDefinitions -> "PrivateStylesheetFormatting.nb"]
]

