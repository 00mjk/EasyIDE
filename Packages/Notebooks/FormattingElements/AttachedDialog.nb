Notebook[{Cell[CellGroupData[{Cell["CreateAttachedDialog", "CodeSection", 
      Evaluatable -> False], 
     Cell[BoxData[{RowBox[{RowBox[{RowBox[{"AttachedDialogPanel", "::", 
              "usage"}], "=", "\"\""}], ";"}], "\n", 
        RowBox[{RowBox[{RowBox[{"AttachedDialogInputPanel", "::", "usage"}], 
            "=", "\"\""}], ";"}], "\n", 
        RowBox[{RowBox[{RowBox[{"CreateAttachedDialog", "::", "usage"}], "=", 
            "\"\""}], ";"}], "\n", RowBox[
         {"  ", RowBox[{RowBox[{RowBox[{"CreateAttachedInputDialog", "::", 
                "usage"}], "=", "\"\""}], ";"}]}]}], "CodeInput"], 
     Cell[BoxData[RowBox[{RowBox[{RowBox[{"IDECreateDialog", "::", "usage"}], 
           "=", "\"\""}], ";"}]], "CodeInput"], 
     Cell[BoxData[RowBox[{RowBox[{"Begin", "[", "\"`Private`\"", "]"}], 
         ";"}]], "InputSection"], 
     Cell[CellGroupData[
       {Cell["\[LeftCeiling]CreateAttachedDialog\[RightFloor]", 
         "CodeSubsection", Evaluatable -> True], 
        Cell[CellGroupData[
          {Cell["\[LeftCeiling]AttachedDialogPanel\[RightFloor]", 
            "CodeSubsubsection", Evaluatable -> True], 
           Cell[BoxData[RowBox[{RowBox[{RowBox[{"AttachedDialogPanel", "[", 
                   "\n", "  ", RowBox[{"expr_", ",", "\n", "  ", RowBox[
                      {"ops", ":", RowBox[{"OptionsPattern", "[", "]"}]}]}], 
                   "\n", "  ", "]"}], ":=", "\n", "  ", RowBox[{"Panel", "[", 
                   "\n", "    ", RowBox[{"expr", ",", "\n", "    ", 
                     RowBox[{"BaseStyle", "\[Rule]", "\"AttachedDialog\""}], 
                     ",", "\n", "    ", "ops"}], "\n", "    ", "]"}]}], 
               ";"}]], "CodeInput"], Cell[BoxData[
             {RowBox[{RowBox[{RowBox[{"prepSubmitButton", "[", RowBox[
                     {"{", RowBox[{"label_", ",", " ", "action_", ",", " ", 
                        "ops___"}], "}"}], "]"}], ":=", "\n", "  ", 
                  RowBox[{"Button", "[", RowBox[{"label", ",", " ", "action", 
                      ",", "\n", "    ", "ops", ",", "\n", "    ", RowBox[
                       {"BaseStyle", "\[Rule]", 
                        "\"AttachedDialogDefaultButton\""}], ",", "\n", 
                      "    ", RowBox[{"Appearance", "\[Rule]", "Inherited"}], 
                      ",", "\n", "    ", RowBox[{"Evaluator", "\[Rule]", 
                        "Inherited"}], ",", "\n", "    ", RowBox[{"Method", 
                        "\[Rule]", "Inherited"}]}], "\n", "    ", "]"}]}], 
                ";"}], "\n", RowBox[{RowBox[{"prepCancelButton", "[", 
                  RowBox[{"{", RowBox[{"label_", ",", " ", "action_", ",", 
                      " ", "ops___"}], "}"}], "]"}], ":=", "\n", "  ", 
                RowBox[{"With", "[", RowBox[{RowBox[{"{", RowBox[{"act", "=", 
                        RowBox[{"If", "[", RowBox[{RowBox[{"action", "===", 
                          "Automatic"}], ",", " ", RowBox[{RowBox[
                          {"NotebookDelete", "[", RowBox[{"EvaluationCell", 
                          "[", "]"}], "]"}], "&"}], ",", " ", "action"}], 
                          "]"}]}], "}"}], ",", "\n", "  ", "  ", RowBox[
                     {"Button", "[", RowBox[{"label", ",", " ", "\n", 
                        "      ", "act", ",", "\n", "      ", "ops", ",", 
                        "\n", "      ", RowBox[{"BaseStyle", "\[Rule]", 
                          "\"AttachedDialogCancelButton\""}], ",", "\n", 
                        "  ", "    ", RowBox[{"Appearance", "\[Rule]", 
                          "Inherited"}], ",", "\n", "  ", "    ", RowBox[
                         {"Evaluator", "\[Rule]", "Inherited"}], ",", "\n", 
                        "  ", "    ", RowBox[{"Method", "\[Rule]", 
                          "Inherited"}]}], "\n", "      ", "]"}]}], "\n", 
                  "    ", "]"}]}]}], "CodeInput"], 
           Cell[BoxData[RowBox[{RowBox[{RowBox[{"iAttachedDialogPanel", "[", 
                   "\n", "  ", RowBox[{"header_", ",", "\n", "  ", "expr_", 
                     ",", "\n", "  ", RowBox[{"submitButton", ":", RowBox[
                        {"{", RowBox[{"_", ",", " ", RowBox[{"_Function", 
                          "|", "None"}], ",", " ", "___"}], "}"}], ":", 
                       RowBox[{"{", RowBox[{"\"OK\"", ",", " ", "None"}], 
                         "}"}]}], ",", "\n", "  ", RowBox[{"closingButton", 
                       ":", RowBox[{"{", RowBox[{"_", ",", " ", RowBox[
                          {"_Function", "|", "Automatic"}], ",", " ", 
                          "___"}], "}"}], ":", RowBox[{"{", RowBox[
                          {"\"Cancel\"", ",", " ", "Automatic"}], "}"}]}], 
                     ",", "\n", "  ", RowBox[{"ops", ":", RowBox[
                        {"OptionsPattern", "[", "]"}]}]}], "\n", "  ", "]"}], 
                 ":=", "\n", "  ", RowBox[{"AttachedDialogPanel", "[", "\n", 
                   "    ", RowBox[{RowBox[{"Grid", "[", "\n", "      ", 
                       RowBox[{RowBox[{"{", "\n", "        ", RowBox[
                          {RowBox[{"{", RowBox[{"Panel", "[", RowBox[{RowBox[
                          {"Pane", "[", "header", "]"}], ",", " ", RowBox[
                          {"BaseStyle", "\[Rule]", 
                          "\"AttachedDialogHeader\""}]}], "]"}], "}"}], ",", 
                          "\n", "        ", RowBox[{"{", RowBox[{"Panel", 
                          "[", RowBox[{"expr", ",", " ", RowBox[{"BaseStyle", 
                          "\[Rule]", "\"AttachedDialogBody\""}]}], "]"}], 
                          "}"}], ",", "\n", "        ", RowBox[{"{", "\n", 
                          "          ", RowBox[{"Panel", "[", "\n", 
                          "            ", RowBox[{RowBox[{"Grid", "[", "\n", 
                          "  ", "            ", RowBox[{RowBox[{"{", "\n", 
                          "  ", "              ", RowBox[{"{", "\n", "  ", 
                          "                ", RowBox[{RowBox[{
                          "prepSubmitButton", "@", "submitButton"}], ",", 
                          " ", "\n", "  ", "                ", RowBox[
                          {"prepCancelButton", "@", "closingButton"}]}], 
                          "\n", "  ", "                ", "}"}], "\n", "  ", 
                          "              ", "}"}], ",", "\n", "  ", 
                          "            ", RowBox[{"GridBoxItemSize", 
                          "\[Rule]", "Inherited"}]}], "\n", "  ", 
                          "            ", "]"}], ",", " ", "\n", "  ", 
                          "          ", RowBox[{"BaseStyle", "\[Rule]", 
                          "\"AttachedDialogButtons\""}]}], "\n", 
                          "            ", "]"}], "\n", "          ", "}"}]}], 
                          "\n", "        ", "}"}], ",", "\n", "      ", 
                         RowBox[{"GridBoxItemSize", "\[Rule]", 
                          "Inherited"}]}], "\n", "      ", "]"}], ",", "\n", 
                     "    ", "ops"}], "\n", "    ", "]"}]}], ";"}]], 
            "CodeInput"], Cell[BoxData[RowBox[{RowBox[{"AttachedDialogPanel", 
                 "[", "\n", "  ", RowBox[{"a_Association", ",", "\n", "  ", 
                   RowBox[{"ops", ":", RowBox[{"OptionsPattern", "[", 
                       "]"}]}]}], "\n", "  ", "]"}], ":=", "\n", "  ", RowBox[
                {"iAttachedDialogPanel", "[", "\n", "    ", RowBox[
                  {RowBox[{"Lookup", "[", RowBox[{"a", ",", " ", 
                       "\"Header\"", ",", " ", "\"\""}], "]"}], ",", "\n", 
                   "    ", RowBox[{"Lookup", "[", RowBox[{"a", ",", " ", 
                       "\"Body\""}], "]"}], ",", "\n", "    ", RowBox[
                    {"Lookup", "[", RowBox[{"a", ",", " ", 
                       "\"SubmitButton\"", ",", " ", "\n", "      ", 
                       RowBox[{"{", "\n", "        ", RowBox[{"\"OK\"", ",", 
                          "\n", "        ", RowBox[{"Lookup", "[", RowBox[
                          {"a", ",", " ", "\"SubmitAction\"", ",", " ", 
                          "None"}], "]"}]}], "\n", "        ", "}"}]}], "\n", 
                     "      ", "]"}], ",", "\n", "    ", RowBox[{"Lookup", 
                     "[", RowBox[{"a", ",", " ", "\"CancelButton\"", ",", 
                       " ", "\n", "      ", RowBox[{"{", "\n", "        ", 
                         RowBox[{"\"Cancel\"", ",", "\n", "        ", RowBox[
                          {"Lookup", "[", RowBox[{"a", ",", " ", 
                          "\"CancelAction\"", ",", " ", "Automatic"}], 
                          "]"}]}], "\n", "        ", "}"}]}], "\n", "      ", 
                     "]"}], ",", "\n", "    ", "ops"}], "\n", "    ", 
                 "]"}]}]], "CodeInput"]}, Open]], 
        Cell[CellGroupData[
          {Cell["\[LeftCeiling]AttachedDialogInputPanel\[RightFloor]", 
            "CodeSubsubsection", Evaluatable -> True], 
           Cell[CellGroupData[
             {Cell["\[LeftCeiling]createInputFieldElement\[RightFloor]", 
               "CodeSubsubsubsection", Evaluatable -> True], Cell[BoxData[
                RowBox[{"createInputFieldElement", "//", "Clear"}]], 
               "CodeInput"], Cell[BoxData[{RowBox[{RowBox[{RowBox[
                      {"createInputFieldElementName", "[", "None", "]"}], 
                     ":=", "\n", "  ", "Nothing"}], ";"}], "\n", 
                 RowBox[{RowBox[{RowBox[{"createInputFieldElementName", "[", 
                       "fieldName_", "]"}], ":=", "\n", "  ", RowBox[
                      {"Item", "[", RowBox[{RowBox[{"Row", "@", RowBox[
                          {"{", RowBox[{RowBox[{"Spacer", "[", "15", "]"}], 
                          ",", " ", "fieldName", ",", " ", "\":\""}], 
                          "}"}]}], ",", " ", "\n", "    ", RowBox[
                          {"Alignment", "\[Rule]", "Right"}]}], "\n", "    ", 
                       "]"}]}], ";"}], "\n", RowBox[{RowBox[{RowBox[
                      {"createInputFieldElementDescription", "[", 
                       "fieldDescription_", "]"}], ":=", "\n", "  ", 
                     "fieldDescription"}], ";"}]}], "CodeInput"], 
              Cell[BoxData[RowBox[{RowBox[{"createInputFieldElement", "[", 
                    "\n", "  ", RowBox[{RowBox[{"Dynamic", "[", "var_", 
                        "]"}], ",", "\n", "  ", "fieldID_", ",", " ", "\n", 
                      "  ", "fieldName_", ",", "\n", "  ", 
                      "fieldDescription_", ",", "\n", "  ", "default_", ",", 
                      "\n", "  ", "ops___"}], "\n", "  ", "]"}], ":=", "\n", 
                  "    ", RowBox[{"{", "\n", "      ", RowBox[
                     {RowBox[{"{", "\n", "        ", RowBox[{RowBox[
                          {"createInputFieldElementName", "[", "fieldName", 
                          "]"}], ",", "\n", "        ", RowBox[{RowBox[
                          {RowBox[{"var", "[", "fieldID", "]"}], "=", 
                          "default"}], ";", "\n", "        ", RowBox[
                          {"InputField", "[", "\n", "      \t\t", RowBox[
                          {RowBox[{"Dynamic", "[", RowBox[{"var", "[", 
                          "fieldID", "]"}], "]"}], ",", "\n", "  ", "  ", 
                          "  ", "\t\t", "String", ",", "\n", "  ", "  ", 
                          "  ", "\t\t", "ops", ",", "\n", "  ", "  ", "  ", 
                          "\t\t", RowBox[{"BoxID", "\[Rule]", "fieldID"}]}], 
                          "\n", "  ", "    \t\t", "]"}]}]}], "\n", "       ", 
                        "}"}], ",", "\n", "     ", RowBox[{"If", "[", 
                        RowBox[{RowBox[{"fieldDescription", "=!=", "None"}], 
                          ",", "\n", "       ", RowBox[{"{", RowBox[{"\"\"", 
                          ",", " ", RowBox[{
                          "createInputFieldElementDescription", "@", 
                          "fieldDescription"}]}], "}"}], ",", "\n", 
                          "       ", "Nothing"}], "\n", "       ", "]"}]}], 
                    "\n", "     ", "}"}]}]], "CodeInput"], Cell[BoxData[
                {RowBox[{RowBox[{RowBox[{"createInputFieldElement", "[", 
                       "\n", "  ", RowBox[{RowBox[{"d", ":", RowBox[
                          {RowBox[{"Verbatim", "[", "Dynamic", "]"}], "[", 
                          "var_", "]"}]}], ",", "\n", "  ", RowBox[{"e", ":", 
                          RowBox[{"Except", "[", RowBox[{"_Association", "|", 
                          "_List"}], "]"}]}]}], "\n", "  ", "]"}], ":=", 
                     "\n", "  ", RowBox[{"{", "\n", "    ", RowBox[{"{", 
                         RowBox[{RowBox[{"Pane", "[", RowBox[{"e", ",", " ", 
                          RowBox[{"BaseStyle", "\[Rule]", 
                          "\"AttachedDialog\""}]}], "]"}], ",", " ", 
                          "SpanFromLeft"}], "}"}], "\n", "    ", "}"}]}], 
                   ";"}], "\n", RowBox[{RowBox[{RowBox[
                      {"createInputFieldElement", "[", "\n", "  ", RowBox[
                        {RowBox[{"d", ":", RowBox[{RowBox[{"Verbatim", "[", 
                          "Dynamic", "]"}], "[", "var_", "]"}]}], ",", "\n", 
                         "  ", "l_List"}], "\n", "  ", "]"}], ":=", "\n", 
                     "  ", RowBox[{"Map", "[", "\n", "    ", RowBox[
                        {RowBox[{RowBox[{"Pane", "[", RowBox[{"#", ",", " ", 
                          RowBox[{"BaseStyle", "\[Rule]", 
                          "\"AttachedDialog\""}]}], "]"}], "&"}], ",", "\n", 
                         "    ", "l", ",", "\n", "    ", RowBox[{"{", "2", 
                          "}"}]}], "\n", "    ", "]"}]}], ";"}], "\n", 
                 RowBox[{RowBox[{"createInputFieldElement", "[", "\n", "  ", 
                     RowBox[{RowBox[{"d", ":", RowBox[{RowBox[{"Verbatim", 
                          "[", "Dynamic", "]"}], "[", "var_", "]"}]}], ",", 
                       "\n", "  ", "a_Association"}], "\n", "  ", "]"}], 
                   ":=", "\n", "  ", RowBox[{"Module", "[", "\n", "    ", 
                     RowBox[{RowBox[{"{", "\n", "      ", RowBox[{"fid", ",", 
                          "\n", "      ", "fname", ",", "\n", "      ", 
                          "fieldDescription", ",", "\n", "      ", "default", 
                          ",", "\n", "      ", "ops"}], "\n", "      ", 
                         "}"}], ",", "\n", "    ", RowBox[{RowBox[{"fid", 
                          " ", "=", " ", "\n", "      ", RowBox[{"Lookup", 
                          "[", RowBox[{"a", ",", " ", "\"ID\"", ",", "\n", 
                          "        ", RowBox[{"Lookup", "[", RowBox[{"a", 
                          ",", " ", "\"Name\"", ",", " ", RowBox[
                          {"CreateUUID", "[", "]"}]}], "]"}]}], "\n", 
                          "        ", "]"}]}], ";", "\n", "    ", RowBox[
                          {"fname", " ", "=", " ", "\n", "      ", RowBox[
                          {"Lookup", "[", RowBox[{"a", ",", " ", "\"Name\"", 
                          ",", " ", "fid"}], "]"}]}], ";", "\n", "    ", 
                         RowBox[{"fieldDescription", " ", "=", " ", "\n", 
                          "      ", RowBox[{"Lookup", "[", RowBox[{"a", ",", 
                          " ", "\"Description\"", ",", " ", "None"}], 
                          "]"}]}], ";", "\n", "    ", RowBox[{"default", " ", 
                          "=", "\n", "      ", RowBox[{"Lookup", "[", RowBox[
                          {"a", ",", " ", "\"Default\"", ",", " ", "\"\""}], 
                          "]"}]}], ";", "\n", "    ", RowBox[{"ops", " ", 
                          "=", "\n", "      ", RowBox[{"Lookup", "[", RowBox[
                          {"a", ",", " ", "\"Options\"", ",", " ", RowBox[
                          {"{", "}"}]}], "]"}]}], ";", "\n", "    ", RowBox[
                          {"createInputFieldElement", "[", "\n", "      ", 
                          RowBox[{"d", ",", "\n", "      ", "fid", ",", "\n", 
                          "      ", "fname", ",", "\n", "  ", "    ", 
                          "fieldDescription", ",", "\n", "      ", "default", 
                          ",", "\n", "      ", RowBox[{"Sequence", "@@", 
                          RowBox[{"Flatten", "@", RowBox[{"{", "ops", 
                          "}"}]}]}]}], "\n", "      ", "]"}]}]}], "\n", 
                     "    ", "]"}]}]}], "CodeInput"]}, Closed]], 
           Cell[CellGroupData[
             {Cell["\[LeftCeiling]createInputFields\[RightFloor]", 
               "CodeSubsubsubsection", Evaluatable -> True], Cell[BoxData[
                RowBox[{RowBox[{RowBox[{"createInputFields", "[", "\n", "  ", 
                      RowBox[{RowBox[{"Dynamic", "[", "var_", "]"}], ",", 
                        "\n", "  ", "specs_"}], "\n", "  ", "]"}], ":=", 
                    "\n", "  ", RowBox[{RowBox[{RowBox[
                         {"createInputFieldElement", "[", RowBox[{RowBox[
                          {"Dynamic", "[", "var", "]"}], ",", " ", "#"}], 
                          "]"}], "&"}], "/@", "specs"}]}], ";"}]], 
               "CodeInput"]}, Closed]], Cell[CellGroupData[
             {Cell["\[LeftCeiling]createInputFieldDialog\[RightFloor]", 
               "CodeSubsubsubsection", Evaluatable -> True], Cell[BoxData[
                RowBox[{RowBox[{RowBox[{"createInputFieldDialog", "[", "\n", 
                      "  ", RowBox[{RowBox[{"Dynamic", "[", "var_", "]"}], 
                        ",", "\n", "  ", "fields_"}], "\n", "  ", "]"}], 
                    ":=", "\n", "  ", RowBox[{"Grid", "[", "\n", "    ", 
                      RowBox[{RowBox[{"Join", "@@", RowBox[
                          {"createInputFields", "[", RowBox[{RowBox[
                          {"Dynamic", "[", "var", "]"}], ",", " ", 
                          "fields"}], "]"}]}], ",", "\n", "    ", RowBox[
                         {"GridBoxItemSize", "\[Rule]", "Inherited"}], ",", 
                        "\n", "    ", RowBox[{"BaseStyle", "\[Rule]", 
                          "\"AttachedDialogInput\""}]}], "\n", "    ", 
                      "]"}]}], ";"}]], "CodeInput"]}, Closed]], 
           Cell[CellGroupData[
             {Cell["\[LeftCeiling]attachedDialogInputSpec\[RightFloor]", 
               "CodeSubsubsubsection", Evaluatable -> True], Cell[BoxData[
                RowBox[{RowBox[{"attachedDialogInputSpec", "[", "\n", "  ", 
                    "a_Association", "\n", "  ", "]"}], ":=", "\n", "  ", 
                  RowBox[{"With", "[", "\n", "    ", RowBox[{RowBox[
                       {"{", "\n", "      ", RowBox[{RowBox[{"s", "=", 
                          RowBox[{"Lookup", "[", RowBox[{"a", ",", " ", 
                          "\"State\"", ",", " ", "None"}], "]"}]}], ",", 
                          "\n", "      ", RowBox[{"fields", " ", "=", " ", 
                          RowBox[{"Flatten", "@", RowBox[{"List", "@", RowBox[
                          {"Lookup", "[", RowBox[{"a", ",", " ", 
                          "\"Fields\"", ",", " ", RowBox[{"{", "}"}]}], 
                          "]"}]}]}]}]}], "\n", "      ", "}"}], ",", "\n", 
                      "    ", RowBox[{"Merge", "[", "\n", "      ", RowBox[
                         {RowBox[{"{", "\n", "        ", RowBox[{RowBox[
                          {"\"Body\"", "->", "\n", "  ", "        ", RowBox[
                          {"If", "[", RowBox[{RowBox[{"s", "===", "None"}], 
                          ",", "\n", "  ", "          ", RowBox[
                          {"DynamicModule", "[", RowBox[{RowBox[{"{", RowBox[
                          {"state", "=", RowBox[{"<|", "|>"}]}], "}"}], ",", 
                          "\n", "              ", RowBox[{
                          "createInputFieldDialog", "[", "\n", "  ", 
                          "              ", RowBox[{RowBox[{"Dynamic", "[", 
                          "state", "]"}], ",", "\n", "  ", "              ", 
                          "fields"}], "\n", "  ", "              ", "]"}]}], 
                          "\n", "  ", "            ", "]"}], ",", "\n", "  ", 
                          "          ", RowBox[{"createInputFieldDialog", 
                          "[", "\n", "  ", "            ", RowBox[{"s", ",", 
                          "\n", "  ", "            ", "fields"}], "\n", "  ", 
                          "            ", "]"}]}], "\n", "  ", "         ", 
                          "]"}]}], ",", "\n", "       ", "a", ",", "\n", 
                          "       ", RowBox[{"\"SubmitAction\"", "->", "\n", 
                          "         ", RowBox[{"(", RowBox[{RowBox[
                          {"NotebookDelete", "[", RowBox[{"EvaluationCell", 
                          "[", "]"}], "]"}], "&"}], ")"}]}]}], "\n", 
                          "       ", "}"}], ",", "\n", "     ", "First"}], 
                        "\n", "     ", "]"}]}], "\n", "   ", "]"}]}]], 
               "CodeInput"]}, Closed]], Cell[CellGroupData[
             {Cell["\[LeftCeiling]AttachedDialogInputPanel\[RightFloor]", 
               "CodeSubsubsubsection", Evaluatable -> True], Cell[BoxData[
                RowBox[{RowBox[{"AttachedDialogInputPanel", "[", "\n", "  ", 
                    RowBox[{"a_Association", ",", "\n", "  ", RowBox[
                       {"ops", ":", RowBox[{"OptionsPattern", "[", "]"}]}]}], 
                    "\n", "  ", "]"}], ":=", "\n", "  ", RowBox[
                   {"AttachedDialogPanel", "[", "\n", "    ", RowBox[
                     {RowBox[{"attachedDialogInputSpec", "[", "a", "]"}], 
                      ",", "\n", "    ", "ops"}], "\n", "    ", "]"}]}]], 
               "CodeInput"]}, Closed]]}, Open]], 
        Cell[CellGroupData[{Cell["\[LeftCeiling]createAttachSpec\[RightFloor]\
", "CodeSubsubsection", Evaluatable -> True], 
           Cell[BoxData[RowBox[{RowBox[{"attachSpecData", "=", "\n", "  ", 
                 RowBox[{"<|", "\n", "    ", RowBox[{RowBox[{"\"Position\"", 
                       "\[Rule]", "\n", "  ", "    ", RowBox[{"<|", RowBox[
                          {RowBox[{"\"Pattern\"", "->", RowBox[{"{", RowBox[
                          {RowBox[{RowBox[{"_", "?", "NumberQ"}], "|", 
                          "_Scaled"}], ",", " ", RowBox[{RowBox[{"_", "?", 
                          "NumberQ"}], "|", "_Scaled"}]}], "}"}]}], ",", " ", 
                          RowBox[{"\"Default\"", "->", RowBox[{"{", RowBox[
                          {"0", ",", " ", "0"}], "}"}]}]}], "|>"}]}], ",", 
                     "\n", "  ", "  ", RowBox[{"\"Alignment\"", "\[Rule]", 
                       "\n", "  ", "    ", RowBox[{"<|", RowBox[{RowBox[
                          {"\"Pattern\"", "->", RowBox[{"{", RowBox[{RowBox[
                          {"Left", "|", "Center", "|", "Right"}], ",", " ", 
                          RowBox[{"Bottom", "|", "Center", "|", "Top"}]}], 
                          "}"}]}], ",", " ", RowBox[{"\"Default\"", "->", 
                          RowBox[{"{", RowBox[{"Center", ",", " ", 
                          "Center"}], "}"}]}]}], "|>"}]}], ",", "\n", "  ", 
                     "  ", RowBox[{"\"Anchor\"", "\[Rule]", "\n", "  ", 
                       "    ", RowBox[{"<|", RowBox[{RowBox[{"\"Pattern\"", 
                          "->", RowBox[{"{", RowBox[{RowBox[{"Left", "|", 
                          "Center", "|", "Right"}], ",", " ", RowBox[
                          {"Bottom", "|", "Center", "|", "Top"}]}], "}"}]}], 
                          ",", " ", RowBox[{"\"Default\"", "->", RowBox[
                          {"{", RowBox[{"Center", ",", " ", "Center"}], 
                          "}"}]}]}], "|>"}]}], ",", "\n", "  ", "  ", 
                     RowBox[{"\"ClosingActions\"", "->", "\n", "  ", "    ", 
                       RowBox[{"<|", RowBox[{RowBox[{"\"Pattern\"", "->", 
                          RowBox[{"{", RowBox[{RowBox[{"(", RowBox[
                          {"\"MouseExit\"", "|", "\"OutsideMouseClick\"", 
                          "|", "\"EvaluatorQuit\""}], ")"}], ".."}], "}"}]}], 
                          ",", " ", "\n", "  ", "      ", RowBox[
                          {"\"Default\"", "->", RowBox[{"{", 
                          "\"EvaluatorQuit\"", "}"}]}]}], "|>"}]}]}], "\n", 
                   "  ", "  ", "|>"}]}], ";"}]], "CodeInput"], 
           Cell[BoxData[RowBox[{" ", RowBox[{RowBox[{RowBox[{RowBox[
                      {"createAttachSpec", "[", "a_Association", "]"}], ":=", 
                     "\n", "  ", RowBox[{"Merge", "[", "\n", "    ", 
                       RowBox[{RowBox[{"{", "\n", "      ", RowBox[{RowBox[
                          {"KeyValueMap", "[", "\n", "        ", RowBox[
                          {RowBox[{RowBox[{"#", "->", "\n", "          ", 
                          RowBox[{"Replace", "[", RowBox[{"#2", ",", "\n", 
                          "            ", RowBox[{RowBox[{"Except", "[", 
                          RowBox[{"Lookup", "[", RowBox[{RowBox[{
                          "attachSpecData", "[", "#", "]"}], ",", " ", 
                          "\"Pattern\""}], "]"}], "]"}], "->", "\n", 
                          "              ", RowBox[{"Lookup", "[", RowBox[
                          {RowBox[{"attachSpecData", "[", "#", "]"}], ",", 
                          " ", "\"Default\""}], "]"}]}]}], "\n", 
                          "            ", "]"}]}], "&"}], ",", "\n", 
                          "        ", RowBox[{"KeyTake", "[", RowBox[{"a", 
                          ",", " ", RowBox[{"Keys", "[", "attachSpecData", 
                          "]"}]}], "]"}]}], "\n", "        ", "]"}], ",", 
                          "\n", "      ", RowBox[{RowBox[{"#Default", "&"}], 
                          "/@", "attachSpecData"}]}], "\n", "      ", "}"}], 
                         ",", "\n", "    ", "First"}], "\n", "    ", "]"}]}], 
                   ";"}], "\n", RowBox[{RowBox[{"createAttachSpec", "[", 
                     "Automatic", "]"}], ":=", "\n", "  ", RowBox[
                    {"createAttachSpec", "[", RowBox[{"<|", "|>"}], 
                     "]"}]}]}]}]], "CodeInput"]}, Closed]], 
        Cell[CellGroupData[{Cell["\[LeftCeiling]insertCloseBox\[RightFloor]", 
            "CodeSubsubsection", Evaluatable -> True], 
           Cell[BoxData[RowBox[{RowBox[{RowBox[{"insertCloseBox", "[", 
                   "panel_", "]"}], ":=", "\n", "  ", RowBox[{"ReplaceAll", 
                   "[", "\n", "    ", RowBox[{RowBox[{"Grid", "[", "\n", 
                       "      ", RowBox[{RowBox[{"{", "\n", "        ", 
                          RowBox[{RowBox[{"{", RowBox[{"Panel", "[", RowBox[
                          {"h_", ",", " ", RowBox[{"BaseStyle", "\[Rule]", 
                          "\"AttachedDialogHeader\""}]}], "]"}], "}"}], ",", 
                          "\n", "        ", "r___"}], "\n", "        ", 
                          "}"}], ",", "\n", "      ", "o___"}], "\n", 
                       "      ", "]"}], "\[RuleDelayed]", "\n", "      ", 
                     RowBox[{"Grid", "[", "\n", "        ", RowBox[
                        {RowBox[{"{", "\n", "          ", RowBox[{RowBox[
                          {"{", "\n", "            ", RowBox[{"Panel", "[", 
                          "\n", "              ", RowBox[{RowBox[{"Grid", 
                          "[", "\n", "                ", RowBox[{RowBox[{"{", 
                          RowBox[{"{", "\n", "                  ", RowBox[
                          {"\"\"", ",", "\n", "                  ", "h", ",", 
                          "\n", "                  ", RowBox[{"RawBoxes", 
                          "@", RowBox[{"ButtonBox", "[", RowBox[{"\"\"", ",", 
                          " ", RowBox[{"BaseStyle", "\[Rule]", 
                          "\"AttachedDialogCloseButton\""}]}], "]"}]}]}], 
                          "\n", "  ", "  ", "  ", "  ", "  ", "  ", "  ", 
                          "  ", "  ", "}"}], "}"}], ",", "\n", "  ", "  ", 
                          "  ", "  ", "  ", "  ", "  ", "  ", RowBox[
                          {"BaseStyle", "->", 
                          "\"AttachedDialogCloseButtonRow\""}], ",", "\n", 
                          "  ", "  ", "  ", "  ", "  ", "  ", "  ", "  ", 
                          RowBox[{"GridBoxItemSize", "\[Rule]", 
                          "Inherited"}]}], "\n", "                ", "]"}], 
                          ",", "\n", "             ", RowBox[{"BaseStyle", 
                          "\[Rule]", "\"AttachedDialogHeader\""}]}], "\n", 
                          "             ", "]"}], "\n", "            ", 
                          "}"}], ",", "\n", "          ", "r"}], "\n", 
                          "          ", "}"}], ",", "\n", "        ", "o"}], 
                       "\n", "        ", "]"}]}], "\n", "    ", "]"}]}], 
               ";"}]], "CodeInput"]}, Closed]], 
        Cell[CellGroupData[
          {Cell["\[LeftCeiling]CreateAttachedDialog\[RightFloor]", 
            "CodeSubsubsection", Evaluatable -> True], 
           Cell[BoxData[RowBox[{RowBox[{"attachables", "=", "\n", "\t", 
                 RowBox[{"_NotebookObject", "|", 
                   "_FrontEnd`EvaluationNotebook", "|", 
                   "_FrontEnd`InputNotebook", "|", "\n", "  ", 
                   "_FrontEnd`SelectedNotebook", "|", 
                   "_FrontEnd`ParentNotebook", "|", 
                   "_FrontEnd`ButtonNotebook", "|", "\n", "  ", 
                   "_CellObject", "|", "_FrontEnd`EvaluationCell", "|", 
                   "_FrontEnd`ParentCell", "|", "_FrontEnd`IndexedCell", "|", 
                   "\n", "  ", "_BoxObject", "|", "_FrontEnd`EvaluationBox", 
                   "|", "_FrontEnd`ParentBox"}]}], ";"}]], "CodeInput"], 
           Cell[BoxData[{RowBox[{"CreateAttachedDialog", "//", "Clear"}], 
              "\n", RowBox[{RowBox[{RowBox[{"Options", "[", 
                    "CreateAttachedDialog", "]"}], "=", "\n", "  ", 
                  RowBox[{"{", "\n", "    ", RowBox[{"\"CreateCloseButton\"", 
                      "\[Rule]", "True"}], "\n", "    ", "}"}]}], ";"}], 
              "\n", RowBox[{RowBox[{RowBox[{"CreateAttachedDialog", "[", 
                    "\n", "  ", RowBox[{RowBox[{"nb", ":", "attachables"}], 
                      ",", " ", "\n", "  ", "expression_", ",", " ", "\n", 
                      "  ", RowBox[{"cellType", ":", "_String", ":", 
                        "\"AttachedDialogCell\""}], ",", "\n", "  ", 
                      RowBox[{"a", ":", RowBox[{"_Association", "|", 
                          "Automatic"}], ":", "Automatic"}], ",", "\n", "  ", 
                      RowBox[{"ops", ":", RowBox[{"OptionsPattern", "[", 
                          "]"}]}]}], "\n", "  ", "]"}], ":=", "\n", "  ", 
                  RowBox[{"With", "[", "\n", "    ", RowBox[{RowBox[
                       {"{", "\n", "      ", RowBox[{RowBox[{"sepc", "=", 
                          RowBox[{"createAttachSpec", "[", "a", "]"}]}], ",", 
                          "\n", "      ", RowBox[{"panel", "=", "\n", 
                          "        ", RowBox[{"AttachedDialogPanel", "[", 
                          "expression", "]"}]}]}], "}"}], ",", "\n", "    ", 
                      RowBox[{"FEAttachCell", "[", "\n", "      ", RowBox[
                         {"nb", ",", "\n", "      ", RowBox[{"Cell", "[", 
                          "\n", "        ", RowBox[{RowBox[{RowBox[{RowBox[
                          {"panel", "//", "\n", "          ", RowBox[{"If", 
                          "[", RowBox[{RowBox[{"Quiet", "[", RowBox[{"TrueQ", 
                          "@", RowBox[{"OptionValue", "[", 
                          "\"CreateCloseButton\"", "]"}]}], "]"}], ",", "\n", 
                          "  ", "          ", "insertCloseBox", ",", "\n", 
                          "  ", "          ", "Identity"}], "\n", "  ", 
                          "          ", "]"}]}], "//", "ToBoxes"}], "//", 
                          "BoxData"}], ",", "\n", "        ", "cellType", 
                          ",", "\n", "        ", RowBox[{"FirstCase", "[", 
                          "\n", "          ", RowBox[{"panel", ",", "\n", 
                          "          ", RowBox[{RowBox[{"i", ":", RowBox[
                          {"InputField", "[", RowBox[{"___", ",", " ", RowBox[
                          {"BoxID", "\[Rule]", "boxID_"}], ",", " ", "___"}], 
                          "]"}]}], ":>", "\n", "            ", RowBox[{"(", 
                          " ", "\n", "              ", RowBox[{
                          "CellDynamicExpression", ":>", "\n", 
                          "                ", RowBox[{"Refresh", "[", "\n", 
                          "                 ", RowBox[{RowBox[{RowBox[
                          {"SelectionMove", "[", RowBox[{RowBox[{
                          "EvaluationCell", "[", "]"}], ",", " ", "Next", 
                          ",", " ", "Word", ",", "\n", "                   ", 
                          RowBox[{"AutoScroll", "\[Rule]", "False"}]}], "\n", 
                          "                   ", "]"}], ";", "\n", 
                          "                  ", RowBox[{"FE`Evaluate", "@", 
                          "\n", "                    ", RowBox[{
                          "FrontEnd`MoveCursorToInputField", "[", "\n", 
                          "                \t\t\t ", RowBox[{RowBox[{
                          "EvaluationNotebook", "[", "]"}], ",", " ", "\n", 
                          "  ", "            \t\t\t\t\t", "boxID"}], "\n", 
                          "  ", "            \t\t\t\t\t", "]"}]}]}], ",", 
                          "\n", "            \t\t\t\t", "None"}], "\n", 
                          "            \t\t\t", "]"}]}], "\n", 
                          "              ", ")"}]}], ",", "\n", "  ", 
                          "        ", RowBox[{"Sequence", "@@", RowBox[{"{", 
                          "}"}]}], ",", "\n", "          ", "Infinity"}], 
                          "\n", "          ", "]"}], ",", "\n", "        ", 
                          "ops"}], "\n", "        ", "]"}], ",", "\n", 
                          "      ", RowBox[{"Offset", "[", RowBox[{RowBox[
                          {"sepc", "[", "\"Position\"", "]"}], ",", " ", 
                          "0"}], "]"}], ",", "\n", "  ", "    ", RowBox[
                          {"sepc", "[", "\"Alignment\"", "]"}], ",", "\n", 
                          "  ", "    ", RowBox[{"sepc", "[", "\"Anchor\"", 
                          "]"}], ",", "\n", "  ", "    ", RowBox[{"sepc", 
                          "[", "\"ClosingActions\"", "]"}]}], "\n", "      ", 
                        "]"}]}], "\n", "    ", "]"}]}], ";"}], "\n", 
              RowBox[{RowBox[{"CreateAttachedDialog", "[", " ", "\n", "  ", 
                  RowBox[{RowBox[{"expression", ":", RowBox[{"Except", "[", 
                        "attachables", "]"}]}], ",", " ", "\n", "  ", 
                    RowBox[{"cellType", ":", "_String", ":", 
                      "\"AttachedDialogCell\""}], ",", "\n", "  ", 
                    RowBox[{"a", ":", RowBox[{"_Association", "|", 
                        "Automatic"}], ":", "Automatic"}], ",", "\n", "  ", 
                    RowBox[{"ops", ":", RowBox[{"OptionsPattern", "[", 
                        "]"}]}]}], "\n", "  ", "]"}], ":=", "\n", "  ", 
                RowBox[{"CreateAttachedDialog", "[", "\n", "    ", 
                  RowBox[{"$CurrentIDENotebook", ",", "\n", "    ", 
                    "expression", ",", "\n", "    ", "cellType", ",", "\n", 
                    "    ", "a", ",", "\n", "    ", "ops"}], "\n", "    ", 
                  "]"}]}]}], "CodeInput"]}, Open]], 
        Cell[CellGroupData[
          {Cell["\[LeftCeiling]CreateAttachedInputDialog\[RightFloor]", 
            "CodeSubsubsection", Evaluatable -> True], 
           Cell[BoxData[{RowBox[{"CreateAttachedInputDialog", "//", 
                "Clear"}], "\n", RowBox[{RowBox[{RowBox[
                   {"CreateAttachedInputDialog", "[", "\n", "  ", RowBox[
                     {RowBox[{"nb", ":", "attachables"}], ",", " ", "\n", 
                      "  ", "fields_Association", ",", " ", "\n", "  ", 
                      RowBox[{"cellType", ":", "_String", ":", 
                        "\"AttachedDialogCell\""}], ",", "\n", "  ", 
                      RowBox[{"a", ":", RowBox[{"_Association", "|", 
                          "Automatic"}], ":", "Automatic"}], ",", "\n", "  ", 
                      RowBox[{"ops", ":", RowBox[{"OptionsPattern", "[", 
                          "]"}]}]}], "\n", "  ", "]"}], ":=", "\n", "  ", 
                  RowBox[{"CreateAttachedDialog", "[", "\n", "    ", 
                    RowBox[{"nb", ",", " ", "\n", "    ", RowBox[
                       {"attachedDialogInputSpec", "[", "fields", "]"}], ",", 
                      "\n", "    ", "cellType", ",", "\n", "    ", "a", ",", 
                      "\n", "    ", "ops"}], "\n", "    ", "]"}]}], ";"}], 
              "\n", RowBox[{RowBox[{"CreateAttachedInputDialog", "[", " ", 
                  "\n", "  ", RowBox[{"fields_Association", ",", " ", "\n", 
                    "  ", RowBox[{"cellType", ":", "_String", ":", 
                      "\"AttachedDialogCell\""}], ",", "\n", "  ", 
                    RowBox[{"a", ":", RowBox[{"_Association", "|", 
                        "Automatic"}], ":", "Automatic"}], ",", "\n", "  ", 
                    RowBox[{"ops", ":", RowBox[{"OptionsPattern", "[", 
                        "]"}]}]}], "\n", "  ", "]"}], ":=", "\n", 
                RowBox[{"CreateAttachedInputDialog", "[", "\n", "    ", 
                  RowBox[{"$CurrentIDENotebook", ",", "\n", "    ", "fields", 
                    ",", "\n", "    ", "cellType", ",", "\n", "    ", "a", 
                    ",", "\n", "    ", "ops"}], "\n", "    ", "]"}]}]}], 
            "CodeInput"]}, Closed]]}, Open]], 
     Cell[CellGroupData[{Cell["\[LeftCeiling]IDECreateDialog\[RightFloor]", 
         "CodeSubsection", Evaluatable -> True], 
        Cell[BoxData[{RowBox[{RowBox[{RowBox[{"IDECreateDialog", "[", 
                 RowBox[{"nb_NotebookObject", ",", " ", "expr_", ",", " ", 
                   "args___"}], "]"}], ":=", "\n", "  ", RowBox[
                {"CreateAttachedDialog", "[", RowBox[{"nb", ",", " ", "expr", 
                   ",", " ", "args"}], "]"}]}], ";"}], "\n", 
           RowBox[{RowBox[{RowBox[{"IDECreateDialog", "[", RowBox[
                  {"ide_IDENotebookObject", ",", " ", "expr_", ",", " ", 
                   "args___"}], "]"}], ":=", "\n", "  ", RowBox[
                {"CreateAttachedDialog", "[", RowBox[{RowBox[{"ide", "[", 
                     "\"Notebook\"", "]"}], ",", " ", "expr", ",", " ", 
                   "args"}], "]"}]}], ";"}]}], "CodeInput"]}, Closed]], 
     Cell[BoxData[RowBox[{RowBox[{"End", "[", "]"}], ";"}]], 
      "InputSection"]}, Open]], Cell["", "SectionSeparator"], 
  Cell[CellGroupData[
    {Cell[BoxData[RowBox[
        {"EasyIDE`Notebooks`FormattingElements`CreateAttachedInputDialog", 
         "[", "\n", "       ", RowBox[
          {"EasyIDE`Notebooks`Utilities`$CurrentIDENotebook", ",", "\n", 
           "        ", RowBox[{"<|", "\n", "          ", 
             RowBox[{RowBox[{"\"Header\"", "->", "\"Commit to Git\""}], ",", 
               "\n", "          ", RowBox[{"\"State\"", "->", RowBox[
                  {"Dynamic", "[", "msg", "]"}]}], ",", "\n", "          ", 
               RowBox[{"\"Fields\"", "->", RowBox[{"{", "\n", "            ", 
                   RowBox[{"\"Provide a commit message\"", ",", "\n", 
                     "            ", RowBox[{"<|", "\n", "              ", 
                       RowBox[{RowBox[{"\"ID\"", "->", "\"Message\""}], ",", 
                         "\n", "              ", RowBox[{"\"Name\"", "->", 
                          "None"}], ",", "\n", "              ", RowBox[
                          {"\"Default\"", "->", RowBox[
                          {"\"Committed via EasyIDE @ ``\"", "~", 
                          "TemplateApply", "~", "Now"}]}], ",", "\n", 
                         "              ", RowBox[{"\"Options\"", "->", 
                          RowBox[{"{", "\n", "                ", RowBox[
                          {RowBox[{"FieldSize", "->", RowBox[{"{", RowBox[
                          {"25", ",", " ", RowBox[{"{", RowBox[{"5", ",", 
                          " ", "25"}], "}"}]}], "}"}]}], ",", "\n", 
                          "                ", RowBox[{"FieldHint", "->", 
                          "\"Commit message...\""}]}], "\n", 
                          "                ", "}"}]}]}], "\n", 
                       "              ", "|>"}]}], "\n", "            ", 
                   "}"}]}], ",", "\n", "        ", RowBox[
                {"\"SubmitAction\"", "\[Rule]", RowBox[{"(", RowBox[
                    {RowBox[{"Print", "[", "msg", "]"}], "&"}], ")"}]}], ",", 
               "\n", "        ", RowBox[{"\"CancelAction\"", "->", "\n", 
                 "          ", RowBox[{"Function", "[", "\n", "            ", 
                   RowBox[{"NotebookDelete", "[", RowBox[{"EvaluationCell", 
                       "[", "]"}], "]"}], "\n", "            ", "]"}]}]}], 
             "\n", "        ", "|>"}], ",", "\[IndentingNewLine]", 
           RowBox[{"<|", "\n", "        ", RowBox[{RowBox[{"\"Position\"", 
                 "\[Rule]", RowBox[{"-", RowBox[{"{", RowBox[{"5", ",", " ", 
                       "5"}], "}"}]}]}], ",", "\n", "        ", RowBox[
                {"\"Alignment\"", "->", RowBox[{"{", RowBox[{"Right", ",", 
                     " ", "Top"}], "}"}]}], ",", "\n", "        ", RowBox[
                {"\"Anchor\"", "->", RowBox[{"{", RowBox[{"Right", ",", " ", 
                     "Top"}], "}"}]}]}], "\n", "        ", "|>"}], ",", "\n", 
           "      ", RowBox[{"CellSize", "->", RowBox[{"{", RowBox[
                {"350", ",", " ", "Automatic"}], "}"}]}], ",", "\n", 
           "      ", RowBox[{"\"CreateCloseButton\"", "->", "False"}]}], 
         "\n", "      ", "]"}]], "Input", CellLabel -> "In[186]:="], 
     Cell[BoxData[TemplateBox[{150513, "150513", "\"AttachedDialogCell\""}, 
        "CellObject"]], "Output", CellLabel -> "Out[186]="]}, Open]]}, 
 WindowSize -> {808, 755}, WindowMargins -> {{Automatic, 212}, 
   {-4, Automatic}}, TaggingRules -> 
  {"UUIDButtons" -> 
    {"Active" -> {"Button-89ffd2c3-ec41-4179-a9b1-8e28670bca2c" -> False, 
       "Button-ca46e5e0-4fd1-47e8-8cf6-72998922b757" -> False, 
       "Button-a6d68254-3684-4d32-83fc-e5ef6f443930" -> False}}}, 
 FrontEndVersion -> 
  "11.3 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 5, 2018)", 
 StyleDefinitions -> FrontEnd`FileName[{"BTools"}, "CodePackage.nb", 
   CharacterEncoding -> "UTF-8"]]
