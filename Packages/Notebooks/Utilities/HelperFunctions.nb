Notebook[{

Cell[CellGroupData[{
Cell["Helper Functions", \
"CodeSection",ExpressionUUID->"2f69e40d-71a3-4345-a123-6177993c9b17"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WithNotebookPaused", "::", "usage"}], "=", 
   "\"\<Pauses the notebook temporarily to execute code\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PreemptiveQueued", "::", "usage"}], "=", 
   "\"\<Evaluates preemptive code in a queued fashion\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"07809c5c-b98a-425d-9997-73575fe37f4c"],

Cell["\[LeftCeiling]Consistent references to the current IDE notebook\
\[RightFloor]", "Text",
 Evaluatable->True,ExpressionUUID->"ad38fb1b-24d8-4de7-9483-a0163154fe3e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"$CurrentIDENotebook", "::", "usage"}], "=", "\"\<\>\""}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"$CurrentIDE", "::", "usage"}], "=", "\"\<\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"734e3831-2545-417b-85ca-57efb43f9b68"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"SetCurrentValue", "::", "usage"}], "=", "\"\<\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"SetCurrentValueDelayed", "::", "usage"}], "=", "\"\<\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"35c5ef24-c0d1-43df-9290-0c330b3fad3f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"b9176f57-bf6a-4603-9239-\
15682af645fa"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]CurrentValues\[RightFloor]", "CodeSubsection",
 Evaluatable->True,ExpressionUUID->"cccbfd93-e68b-4b6a-8d36-e8fa9b0baf21"],

Cell[BoxData[{
 RowBox[{"SetCurrentValue", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{"SetCurrentValue", "[", 
   RowBox[{"nb_", ",", " ", "k_", ",", " ", "value_"}], "]"}], ":=", "\n", 
  "  ", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"h", "=", "FrontEnd`$TrackingEnabled"}], "}"}], ",", "\n", 
    "  \t", 
    RowBox[{"MathLink`CallFrontEndHeld", "[", "\n", "      ", 
     RowBox[{"FrontEnd`SetValue", "[", "\n", "\t\t\t\t\t", 
      RowBox[{
       RowBox[{"FEPrivate`Set", "[", "\n", "\t\t\t\t\t\t", 
        RowBox[{
         RowBox[{"FrontEnd`CurrentValue", "[", 
          RowBox[{"nb", ",", " ", "k"}], "]"}], ",", " ", "\n", "          ", 
         "value"}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
       "h"}], "\n", "\t\t\t\t\t", "]"}], "\n", "      ", "]"}]}], "\n", 
   "    ", "]"}]}]}], \
"CodeInput",ExpressionUUID->"bc8579e6-9659-49f7-8537-01a8672128d5"],

Cell[BoxData[{
 RowBox[{"SetCurrentValueDelayed", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{"SetCurrentValueDelayed", "[", 
   RowBox[{"nb_", ",", " ", "k_", ",", " ", 
    RowBox[{"Hold", "[", "value_", "]"}]}], "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"h", "=", "FrontEnd`$TrackingEnabled"}], "}"}], ",", "\n", "  ", 
    "\t", 
    RowBox[{"MathLink`CallFrontEndHeld", "[", "\n", "  ", "    ", 
     RowBox[{"FrontEnd`SetValue", "[", "\n", "        ", 
      RowBox[{
       RowBox[{"FEPrivate`SetDelayed", "[", "\n", "          ", 
        RowBox[{
         RowBox[{"FrontEnd`CurrentValue", "[", 
          RowBox[{"nb", ",", " ", "k"}], "]"}], ",", " ", "\n", "          ", 
         "value"}], "\n", "  ", "        ", "]"}], ",", "\n", "  ", "      ", 
       "h"}], "\n", "  ", "      ", "]"}], "\n", "      ", "]"}]}], "\n", 
   "    ", "]"}]}]}], \
"CodeInput",ExpressionUUID->"64c7082d-007e-49b3-bbf0-380a231bd42e"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]IDE Refs\[RightFloor]", "CodeSubsection",
 Evaluatable->True,ExpressionUUID->"5f227acd-0de9-4788-acd9-1f2a997ecddb"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"$CurrentIDENotebook", " ", ":=", " ", 
   RowBox[{"EvaluationNotebook", "[", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"$CurrentIDE", " ", ":=", " ", 
   RowBox[{"IDENotebookObject", "[", "$CurrentIDENotebook", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"260dd5be-b957-4804-b476-9030c495c4c0"]\

}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Helpers\[RightFloor]", "CodeSubsection",
 Evaluatable->True,ExpressionUUID->"3ca876ba-c6cb-44dd-883a-933565dec75f"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WithPausedNotebook\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"c97c646b-7926-4275-81c8-15e9fdce2394"],

Cell["\<\
\[LeftCeiling]
\tHelper function to suspend the screen while updating the nb
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"5c02b0a8-4f76-4970-af6e-63454c49c042"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WithNotebookPaused", "[", 
    RowBox[{"nb_NotebookObject", ",", " ", "expr_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"Block", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t  ", 
      RowBox[{
       RowBox[{"paused", " ", "=", " ", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"TrueQ", "@", "paused"}], ",", " ", "True", ",", " ", 
          "False"}], "]"}]}], ",", "\n", "\t  ", 
       RowBox[{"FrontEnd`$TrackingEnabled", " ", "=", " ", "False"}], ",", 
       "\n", "\t  ", "setDataCalls"}], " ", "\n", "\t    ", 
      RowBox[{"(*", " ", "\n", "\t            ", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{
           "Should", " ", "I", " ", "catch", " ", "all", " ", "of", " ", 
            "the", " ", "ideSetNbData", " ", "calls"}], "..."}], "?", " ", 
          "\n", "\t            ", "I"}], " ", "could", " ", "batch", " ", 
         "them", " ", "all", " ", "up", " ", "at", " ", "once", " ", "and", 
         " ", "maybe", " ", "decrease", " ", "the", " ", "amount", " ", "of", 
         " ", "processing", " ", "time"}], "..."}], "\n", "\t            ", 
       "*)"}], "\n", "\t  ", "}"}], ",", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{"paused", ",", "\n", "\t\t\t", "expr", ",", "\n", "\t\t\t", 
       RowBox[{"Internal`WithLocalSettings", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"FrontEndExecute", "@", "\n", "\t", "\t", "\t\t\t", 
           RowBox[{
           "FrontEnd`NotebookSuspendScreenUpdates", "[", "nb", "]"}]}], ";"}],
          ",", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"paused", " ", "=", " ", "True"}], ";", "\n", "\t\t\t\t", 
          "expr"}], ",", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"FrontEndExecute", "@", "\n", "\t\t\t\t\t", 
           RowBox[{"FrontEnd`NotebookResumeScreenUpdates", "[", "nb", "]"}]}],
           ";"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}]}], "\n", 
    "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{"WithNotebookPaused", "~", "SetAttributes", "~", 
  "HoldRest"}]}], \
"CodeInput",ExpressionUUID->"d42816f2-f08b-45d7-b339-51ce1e889b54"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]IDEPreemptive\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"b88b972d-01b4-4c49-940c-a084786649bc"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PreemptiveQueued", "[", 
    RowBox[{"nb_", ",", " ", "expr_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"MessageDialog", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"DynamicModule", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"{", "}"}], ",", "\n", "\t\t\t", "Null", ",", "\n", "\t\t\t", 
       RowBox[{"Initialization", "\[RuleDelayed]", 
        RowBox[{"{", "\n", "\t\t\t\t", 
         RowBox[{"Internal`WithLocalSettings", "[", "\n", "\t\t\t\t\t", 
          RowBox[{"Null", ",", "\n", "\t\t\t\t\t", 
           RowBox[{"Block", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"$CurrentIDENotebook", "=", "nb"}], "\n", 
              "\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t", "expr"}], 
            "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"NotebookClose", "[", 
            RowBox[{"EvaluationNotebook", "[", "]"}], "]"}]}], "\n", 
          "\t\t\t\t\t", "]"}], "\n", "\t\t\t\t", "}"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"SynchronousInitialization", " ", "->", " ", "False"}]}], "\n",
       "\t\t\t", "]"}], ",", "\n", "\t\t", 
     RowBox[{"Visible", "\[Rule]", "False"}], ",", "\n", "\t\t", 
     RowBox[{"Evaluator", "\[Rule]", 
      RowBox[{"CurrentValue", "[", 
       RowBox[{"nb", ",", " ", "Evaluator"}], "]"}]}]}], "\n", "\t\t", 
    "]"}]}], ";"}], "\n", 
 RowBox[{"PreemptiveQueued", "~", "SetAttributes", "~", 
  "HoldRest"}]}], \
"CodeInput",ExpressionUUID->"3074f592-b082-435a-8e7b-83171530633e"]
}, Open  ]]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"End", "[", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"6d856723-ce46-4de7-b993-\
77bfa6fc3a3f"]
}, Open  ]],

Cell["", "SectionSeparator",ExpressionUUID->"cdcc3b78-ca57-40c1-9dfd-\
4bbccf62c1e5"]
},
WindowSize->{808, 755},
WindowMargins->{{Automatic, 270}, {Automatic, 49}},
TaggingRules->{
 "UUIDButtons" -> {
   "Active" -> {
     "Button-89ffd2c3-ec41-4179-a9b1-8e28670bca2c" -> False, 
      "Button-ca46e5e0-4fd1-47e8-8cf6-72998922b757" -> False, 
      "Button-a6d68254-3684-4d32-83fc-e5ef6f443930" -> False}}},
FrontEndVersion->"11.3 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 5, \
2018)",
StyleDefinitions->FrontEnd`FileName[{"BTools"}, "CodePackage.nb", 
  CharacterEncoding -> "UTF-8"]
]

